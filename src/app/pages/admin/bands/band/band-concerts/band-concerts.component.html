<main>
    <div class="concerts">
        @for(concert of concerts;track concert; let index = $index) {
        <div class="concert">
            <div class="date_visible">

                <div class="date">{{concert.date.seconds*1000|date}}</div>
                @if(concert.visible) {
                <mat-icon>visibility</mat-icon>
                } @else {
                <mat-icon>visibility_off</mat-icon>
                }
            </div>
            <div class="venue-name">{{concert.venueName}}</div>
            <div class="city_country">
                @if(concert.city){
                <div class="city">{{concert.city}}</div>
                }
                @if(concert.country) {
                <div class="country">{{concert.country}}</div>
                }
            </div>
            <div class="buttons">
                <button mat-icon-button
                    (click)="onEdit(index)">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button
                    (click)="onDelete(index)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>
        }
    </div>

    <form [formGroup]="concertForm">
        <mat-form-field>
            <mat-label>Choose a date</mat-label>
            <input matInput
                formControlName="date"
                [matDatepicker]="picker">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix
                [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
            <mat-label>venue name</mat-label>
            <input type="text"
                matInput
                formControlName="venueName">
        </mat-form-field>
        <mat-form-field>
            <mat-label>city</mat-label>
            <input type="text"
                matInput
                formControlName="city">
        </mat-form-field>
        <mat-form-field>
            <mat-label>country</mat-label>
            <input type="text"
                matInput
                formControlName="country">
        </mat-form-field>
        <mat-checkbox formControlName="visible">visible</mat-checkbox>
        <div class="buttons">
            <button class="button"
                mat-raised-button
                (click)="onAddOrUpdateConcert()">{{!editmode ? 'add': 'update'}}&nbsp;concert</button>
            <button mat-raised-button
                (click)="onCancel()">cancel</button>
            .
        </div>

    </form>
</main>
